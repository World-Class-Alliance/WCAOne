<html>
<head>
  <title>WCAOne - One login for all of the WCA</title>
  <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.9.1/font/bootstrap-icons.min.css" integrity="sha512-5PV92qsds/16vyYIJo3T/As4m2d8b6oWYfoqV+vtizRB6KhF1F9kYzWzQmsO6T3z3QG2Xdhrx7FQ+5R1LiQdUA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body>
  <div id="login_div" class="main-div">
    <h3>WCAOne</h3>
    <input type="email" placeholder="Email..." id="email_field" />
    <input type="password" placeholder="Password..." id="password_field" />
	  <div class="cf-turnstile" data-sitekey="0x4AAAAAAAB0b5b1kvLgnr-R"></div> 

    <button onclick="login()">Login to Account</button>
  </div>

  <div id="user_div" class="loggedin-div">
    <h3 id="welcome">Welcome User</h3>
    <p id="user_para"></p>
		<button onclick="findPage()">Continue</button>
    <button onclick="logout()">Logout</button>
  </div>


  <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyDEoI1BPdzQ2pSVOjVy3YWj_gsGVo1sn0c",
      authDomain: "wcaone.firebaseapp.com",
      databaseURL: "wcaone.firebaseio.com",
      projectId: "wcaone",
      storageBucket: "wcaone.appspot.com",
      messagingSenderId: "651171963358"
    };
    firebase.initializeApp(config);
  </script>
  <script type = "text/javascript">
	var emailVal = document.getElementById("email_field").value;
	if (emailVal == "rylee.peak@thewca.us")
	{
		document.getElementById("welcome").innerHTML = "Hi, Rylee!";
	}
	function findPage()
	  {
		  var params = new URLSearchParams(window.location.search);
		  var emailVal = document.getElementById("email_field").value;
		  var name = params.get("name");
		  if (name == "search")
		  {
			  window.location.href = "https://search.thewca.us/search.html";
		  }
		  else if (name == "tny")
		  {
			  window.location.href = "https://howto.tny.thewca.us";
		  }
		  else if (name == "portal")
		  {
			  window.location.href = "https://portal.thewca.us/authed.html?email=" + emailVal;
		  }
		  else if (name == "myWCA")
		  {
			  window.location.href = "https://my.thewca.us/authed.html?email=" + emailVal;
		  }
		  else
		  {
			  alert("No service was made available to redirect you to. We are very sorry for this inconvenience");
		  }
	  }
  </script>
  <script src="index.js"></script>

</body>
</html>
